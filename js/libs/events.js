var EventEmitter=function(){};EventEmitter.prototype.setMaxListeners=function(e){if(!this._events)this._events={};this._events.maxListeners=e};EventEmitter.prototype.emit=function(e){if(e==="error"){if(!this._events||!this._events.error||Array.isArray(this._events.error)&&!this._events.error.length){if(arguments[1]instanceof Error){throw arguments[1]}else{throw new Error("Uncaught, unspecified 'error' event.")}return false}}if(!this._events)return false;var t=this._events[e];if(!t)return false;if(typeof t=="function"){switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);t.apply(this,n)}return true}else if(Array.isArray(t)){var n=Array.prototype.slice.call(arguments,1);var r=t.slice();for(var i=0,s=r.length;i<s;i++){r[i].apply(this,n)}return true}else{return false}};EventEmitter.prototype.publish=EventEmitter.prototype.emit;EventEmitter.prototype.addListener=function(e,t){if("function"!==typeof t){throw new Error("addListener only takes instances of Function")}if(!this._events)this._events={};this.emit("newListener",e,t);if(!this._events[e]){this._events[e]=t}else if(Array.isArray(this._events[e])){this._events[e].push(t);if(!this._events[e].warned){var n;if(this._events.maxListeners!==undefined){n=this._events.maxListeners}else{n=10}if(n&&n>0&&this._events[e].length>n){this._events[e].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[e].length);console.trace()}}}else{this._events[e]=[this._events[e],t]}return this};EventEmitter.prototype.on=EventEmitter.prototype.subscribe=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(e,t){function r(){n.removeListener(e,r);t.apply(this,arguments)}if("function"!==typeof t){throw new Error(".once only takes instances of Function")}var n=this;r.listener=t;n.on(e,r);return this};EventEmitter.prototype.removeListener=function(e,t){if("function"!==typeof t){throw new Error("removeListener only takes instances of Function")}if(!this._events||!this._events[e])return this;var n=this._events[e];if(Array.isArray(n)){var r=-1;for(var i=0,s=n.length;i<s;i++){if(n[i]===t||n[i].listener&&n[i].listener===t){r=i;break}}if(r<0)return this;n.splice(r,1);if(n.length==0)delete this._events[e]}else if(n===t||n.listener&&n.listener===t){delete this._events[e]}return this};EventEmitter.prototype.unsubscribe=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function(e){if(arguments.length===0){this._events={};return this}if(e&&this._events&&this._events[e])this._events[e]=null;return this};EventEmitter.prototype.listeners=function(e){if(!this._events)this._events={};if(!this._events[e])this._events[e]=[];if(!Array.isArray(this._events[e])){this._events[e]=[this._events[e]]}return this._events[e]};EventEmitter.mixin=function(e){for(var t in EventEmitter.prototype){if(!e.prototype[t]){e.prototype[t]=EventEmitter.prototype[t]}}}