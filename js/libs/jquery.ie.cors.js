(function(e){var t;if(!("__jquery_xdomain__"in e)&&e.browser.msie&&"XDomainRequest"in window&&!("XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest)&&document.location.href.indexOf("file:///")==-1){e["__jquery_xdomain__"]=e.support.cors=true;var n=/^(((([^:\/#\?]+:)?(?:\/\/((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?]+)(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,r=e.ajaxSettings.xhr,i="XDR_SESSION_COOKIE_NAME"in window?window["XDR_SESSION_COOKIE_NAME"]:"jsessionid",s="XDR_COOKIE_HEADERS"in window?window["XDR_COOKIE_HEADERS"]:[],o="XDR_HEADERS"in window?window["XDR_HEADERS"]:["Content-Type"],u={UNSENT:0,OPENED:1,LOADING:3,DONE:4},a=window["XDR_DEBUG"]&&"console"in window,f,l,c=0;function h(e,t){if(typeof e=="string"){e=[e]}var n,r;for(n=0;n<e.length;n++){r=(new RegExp("(?:^|; )"+e[n]+"=([^;]*)","i")).exec(document.cookie);r=r&&r[1];if(r){t.call(null,e[n],r)}}}function p(e){if(e.length>=5){var t=e.substring(e.length<=20?0:e.length-20),n=t.length-1,r,i,s;if(t.charAt(n)==="~"){for(r=n--;n>=0&&t.charAt(n)!=="~";n--);i=parseInt(t.substring(n+1,r));if(!isNaN(i)&&i>=0&&n>=2&&t.charAt(n)==="~"){for(r=n--;n>=0&&t.charAt(n)!=="~";n--);s=parseInt(t.substring(n+1,r));if(!isNaN(s)&&n>=0&&t.charAt(n)==="~"){r=e.length-i-t.length+n;return[s,e.substring(0,r),e.substr(r,i)]}}}}return[200,e,""]}function d(e){if(typeof e==="object"){return e}var t=n.exec(e);return t?{href:t[0]||"",hrefNoHash:t[1]||"",hrefNoSearch:t[2]||"",domain:t[3]||"",protocol:t[4]||"",authority:t[5]||"",username:t[7]||"",password:t[8]||"",host:t[9]||"",hostname:t[10]||"",port:t[11]||"",pathname:t[12]||"",directory:t[13]||"",filename:t[14]||"",search:t[15]||"",hash:t[16]||""}:{}}function v(e){if(e.length==0){return[]}var t=[],n=0,r=0,i,s;do{i=e.indexOf(",",r);t[n]=(t[n]||"")+e.substring(r,i==-1?e.length:i);r=i+1;if(t[n].indexOf("Expires=")==-1||t[n].indexOf(",")!=-1){n++}else{t[n]+=","}}while(i>0);for(n=0;n<t.length;n++){s=t[n].indexOf("Domain=");if(s!=-1){t[n]=t[n].substring(0,s)+t[n].substring(t[n].indexOf(";",s)+1)}}return t}l=d(document.location.href).domain;f=function(){var n=this,r=new XDomainRequest,f,l=[],d,m,g=c++,y=function(e){n.readyState=e;if(typeof n.onreadystatechange==="function"){n.onreadystatechange.call(n)}},b=function(t,i){if(!n.responseText){n.responseText=""}if(a){console.log("[XDR-"+g+"] request end with state "+t+" and code "+i+" and data length "+n.responseText.length)}n.status=i;if(!n.responseType){f=f||r.contentType;if(f.match(/\/json/)){n.responseType="json";n.response=n.responseText}else if(f.match(/\/xml/)){n.responseType="document";var s,o=new ActiveXObject("Microsoft.XMLDOM");o.async=false;o.loadXML(n.responseText);n.responseXML=n.response=o;if(e(o).children("error").length!=0){s=e(o).find("error");n.status=parseInt(s.attr("response_code"))}}else{n.responseType="text";n.response=n.responseText}}y(t);r=null;l=null;m=null};r.onprogress=function(){y(u.LOADING)};r.ontimeout=function(){b(u.DONE,408)};r.onerror=function(){b(u.DONE,500)};r.onload=function(){var e,i,s=p(r.responseText||"");if(a){console.log("[XDR-"+c+"] parsing cookies for header "+s[2])}e=v(s[2]);n.responseText=s[1]||"";if(a){console.log("[XDR-"+g+"] raw data:\n"+r.responseText+"\n parsed response: status="+s[0]+", header="+s[2]+", data=\n"+s[1])}for(i=0;i<e.length;i++){if(a){console.log("[XDR-"+g+"] installing cookie "+e[i])}document.cookie=e[i]+";Domain="+document.domain}b(u.DONE,s[0]);if(typeof t.success==="function"){t.success(s[1])}s=null};this.readyState=u.UNSENT;this.status=0;this.statusText="";this.responseType="";this.timeout=0;this.withCredentials=false;this.overrideMimeType=function(e){f=e};this.abort=function(){r.abort()};this.setRequestHeader=function(t,n){if(e.inArray(t,o)>=0){l.push({k:t,v:n})}};this.open=function(e,t){m=t;d=e;y(u.OPENED)};this.send=function(e){r.timeout=this.timeout;if(i||s||l.length){var t,n=function(e,t){var n=m.indexOf("?");m+=(n==-1?"?":"&")+e+"="+encodeURIComponent(t);if(a){console.log("[XDR-"+g+"] added parameter "+e+"="+t+" => "+m)}};for(t=0;t<l.length;t++){n(l[t].k,l[t].v)}h(i,function(e,t){var n=m.indexOf("?");if(n==-1){m+=";"+e+"="+t}else{m=m.substring(0,n)+";"+e+"="+t+m.substring(n)}if(a){console.log("[XDR-"+g+"] added cookie "+m)}});h(s,n);n("_xdr",""+g)}if(a){console.log("[XDR-"+g+"] opening "+m)}r.open(d,m);if(a){console.log("[XDR-"+g+"] send, timeout="+r.timeout)}r.send(e)};this.getAllResponseHeaders=function(){return""};this.getResponseHeader=function(){return null}};e.ajaxSettings.xhr=function(){var n=d(this.url).domain;t=this;if(n===""||n===l){return r.call(e.ajaxSettings)}else{try{return new f}catch(i){}}}}})(jQuery)